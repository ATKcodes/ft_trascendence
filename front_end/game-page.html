<html lang="en">
<head>
	<!-- Bootstrap CSS -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
	<link rel="stylesheet" href="styles.css">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
	<title>PONG</title>
	<style>
	.select-language{
		background-color: #B6A999;
		color: #000000;
		position: absolute;
		right: 8%;
		top: 5%;
		width: 4%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: left;
	}
	.div-friends{
		position: absolute;
		right: 3%;
		bottom: 5%;
		width: 20%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
	
	}
	.div-title {
		font-family: 'font-Despairs';
		font-size: 250%;
		position: absolute;
		left: 45%; /* Change this to move the div horizontally */
		right: 2%;
		top: 0%; /* Change this to move the div vertically */
		width: 15%;
		padding : 1%;
		color: black;
		}
	.div-friendsmenu {
		position: absolute;
		right: 5%;
		bottom: 3%;
		width: 15%;
		height: 40%;
		padding : 1%;
		margin: 0 auto;
		text-align: center;
		background-color: #B6A999;
	}
	.avatar {
		width: 50px;
		height: 50px;
		border-radius: 50%;
		font-weight: lighter;
		font-size :110%;
		color: #ffffff;
		position: absolute;
		left: 2%;
		top: 1.5%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
	}
	.avatar2 {
		width: 50px;
		height: 50px;
		border-radius: 50%;
		font-weight: lighter;
		font-size :110%;
		color: #ffffff;
		position: absolute;
		right: 2%;
		top: 1.5%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
	}
	.btn-left {
		font-weight: lighter;
		font-size :110%;
		background-color: #000000;
		color: #ffffff;
		position: absolute;
		left: 20%;
		top: 45%;
		width: 20%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
		border-color: #ffffff;
	}
	.btn-right {
		font-weight: lighter;
		font-size :110%;
		background-color: #000000;
		color: #ffffff;
		position: absolute;
		right: 20%;
		top: 45%;
		width: 20%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
		border-color: #ffffff;
	}
	.open_text {
		font-size: 200%;
		text-align: center;
		position: absolute;
		width: 60%;
		height: 75%;
		left: 20%;
		right: 2%;
		top: 20%;
		bottom: 10%;
		background-color: #000000;
		color: #ffffff;
	}
	.select {
		background-image: url('srcs/download.jpeg');
		border-radius: 50%;
		color: #000000;
		position: absolute;
		left: 3%;
		top: 5%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: left;
	}
	.dropdown {
		position: relative;
		display:flex;
		top: 5%;
	}
	.dropdown-menu {
		display: none;
		position: absolute;
		background-color: #f9f9f9;
		min-width: 160px;
		box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
		z-index: 1;
	}
	.dialog {
		display: none;
		background-color: #f9f9f9;
	}
	.userleft{
		position: absolute;
		left: 5%;
		top: 2.5%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
	}	
	.userright{
		position: absolute;
		right: 5%;
		top: 2.5%;
		padding : 0.5%;
		margin: 0 auto;
		text-align: center;
	}
	#pong-game {
    	position: relative;
		width: 96%;
		height: 90%;
		left: 2%;
		right: 2%;
		top: 8%;
		bottom: 10%;
		background-color: #000000;
		color: #ffffff;
	    border: 1px solid black;
	}

	#ball {
		position: absolute;
		height: 10px;
		width: 10px;
		background: black;
		color : white;
	}

	#paddleA, #paddleB {
		position: absolute;
		height: 80px;
		width: 10px;
		background: black;
		color : white;
	}

	#paddleA {
		left: 0;
	}

	#paddleB {
		right: 0;
	}

	#ball, #paddleA, #paddleB {
		background: white;
   		z-index: 2;
}
	</style>
	<!-- Bootstrap JS -->
</head>
<body>
	<img src="srcs/download.jpeg" alt="Avatar" class="avatar" id="go_to_profle">
	<h5 class = "userleft">User1</h5>
	<h2 id="go_to_main" class="div-title" style="user-select:none;">PONG</h2>
	<script>
		document.getElementById("go_to_main").addEventListener("click", function() {
			window.parent.goToMain();
		});
	</script>
	<img src="srcs/download.jpeg" alt="Avatar" class="avatar2" id="go_to_profle">
	<h5 class = "userright">User2</h5>
	<div id  = "pong-game">
		<div id="ball"></div>
		<div id="paddleA"></div>
		<div id="paddleB"></div>
		<button id = "play-pong" type="button" class="btn btn-left btn-lg btn-block">Play Pong</button>
		<button id = "play-tris" type="button" class="btn btn-right btn-lg btn-block">Play Tris</button>
	</div>
</body>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<!-- Il tuo codice JavaScript qui -->

<script>
	var pongGame;
	window.onload = function(){
	pongGame = {
		game: document.getElementById('pong-game'),
		ball: document.getElementById('ball'),
		paddleA: document.getElementById('paddleA'),
		paddleB: document.getElementById('paddleB'),
		ballPos: {x: 0, y: 0},
		paddleAPos: {y: 0},
		paddleBPos: {y: 0},
	    ballSpeed: {x: 2, y: 2},

		update: function() {
        // Update the position of the ball
        this.ballPos.x += this.ballSpeed.x;
        this.ballPos.y += this.ballSpeed.y;

        // Collision detection with the game boundaries
        if (this.ballPos.x < 0 || this.ballPos.x + this.ball.offsetWidth > this.game.offsetWidth) {
            this.ballSpeed.x *= -1; // Reverse the horizontal direction
        }
        if (this.ballPos.y < 0 || this.ballPos.y + this.ball.offsetHeight > this.game.offsetHeight) {
            this.ballSpeed.y *= -1; // Reverse the vertical direction
        }

        // Collision detection with the paddles
        if ((this.ballPos.x < this.paddleA.offsetWidth && this.ballPos.y + this.ball.offsetHeight > this.paddleAPos.y && this.ballPos.y < this.paddleAPos.y + this.paddleA.offsetHeight) ||
            (this.ballPos.x + this.ball.offsetWidth > this.game.offsetWidth - this.paddleB.offsetWidth && this.ballPos.y + this.ball.offsetHeight > this.paddleBPos.y && this.ballPos.y < this.paddleBPos.y + this.paddleB.offsetHeight)) {
            this.ballSpeed.x *= -1; // Reverse the horizontal direction
        }
    },

	draw: function() {
    // Update the position of the ball
    this.ball.style.top = this.ballPos.y + 'px';
    this.ball.style.left = this.ballPos.x + 'px';

    // Update the position of paddle A
    this.paddleA.style.top = this.paddleAPos.y + 'px';

    // Update the position of paddle B
    this.paddleB.style.top = this.paddleBPos.y + 'px';
},

    loop: function() {
        pongGame.update();
        pongGame.draw();
        requestAnimationFrame(pongGame.loop);
    },

    start: function() {
        pongGame.loop();
    }
};

	pongGame.ballPos = {x: pongGame.game.offsetWidth/2, y: pongGame.game.offsetHeight/2},
    pongGame.paddleAPos = {y: pongGame.game.offsetHeight/2 - pongGame.paddleA.offsetHeight/2},
    pongGame.paddleBPos = {y: pongGame.game.offsetHeight/2 - pongGame.paddleB.offsetHeight/2},


document.getElementById("play-pong").addEventListener("click", function() {
    document.getElementById("play-pong").style.display = "none";
    document.getElementById("play-tris").style.display = "none";
    pongGame.start();
});
}
</script>
</html>